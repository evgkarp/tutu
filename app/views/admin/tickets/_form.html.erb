<%= form_with(model: ticket, local: true) do |f| %>
  <%= render 'common/errors', resource: @ticket %>
  <% if local_assigns[:full] %>
    <% train = @train %>
  <% else %>
    <% train = @ticket.train %>
  <% end %>

  <div class="field">
    <%= f.label :full_name, "ФИО" %>
    <%= f.text_field :full_name, id: :ticket_full_name %>
  </div>

  <div class="field">
    <%= f.label :passport_number, "Номер паспорта" %>
    <%= f.text_field :passport_number, id: :ticket_passport_number %>
  </div>

  <div class="field">
    <%= f.label :wagon_id, 'Номер вагона' %>
    <%= f.collection_select :wagon_id, train.wagons, :id, :number %>
  </div>

  <div class="field">
    <%= f.label :user_id, 'Аккаунт пользователя' %>
    <%= f.collection_select :user_id, User.all, :id, :email %>
  </div>

  <% if local_assigns[:full] %>
    <%= hidden_field_tag("ticket[from_station_id]", @from_station.id) %>
    <%= hidden_field_tag("ticket[to_station_id]", @to_station.id) %>
    <%= hidden_field_tag("ticket[train_id]", @train.id) %>
    <%= hidden_field_tag(:from_station_id, @from_station.id) %>
    <%= hidden_field_tag(:to_station_id, @to_station.id) %>
    <%= hidden_field_tag(:train_id, @train.id) %>
  <% end %>

  <div class="actions">
    <%= f.submit "#{ @ticket.new_record? ? 'Купить' : 'Изменить' }" %>
  </div>
<% end %>
